{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport productAPI from '../../mocks/product';\nconst initialState = {\n  productList: {\n    products: [],\n    loading: false,\n    error: null,\n    page: 0,\n    pages: 0\n  },\n  productDetails: {\n    product: {\n      reviews: []\n    },\n    loading: false,\n    error: null\n  },\n  createReview: {\n    loading: false,\n    error: null,\n    success: false\n  },\n  topRatedProducts: {\n    products: [],\n    loading: false,\n    error: null\n  }\n};\nconst productSlice = createSlice({\n  name: \"product\",\n  initialState,\n  reducers: {\n    productListRequest(state) {\n      state.productList.loading = true;\n      state.productList.error = null;\n    },\n    productListSuccess(state, action) {\n      state.productList.loading = false;\n      state.productList.products = action.payload.products;\n      state.productList.page = action.payload.page;\n      state.productList.pages = action.payload.pages;\n    },\n    productListFailure(state, action) {\n      state.productList.loading = false;\n      state.productList.error = action.payload;\n    },\n    productDetailsRequest(state) {\n      state.productDetails.loading = true;\n      state.productDetails.error = null;\n    },\n    productDetailsSuccess(state, action) {\n      state.productDetails.loading = false;\n      state.productDetails.product = action.payload;\n    },\n    productDetailsFailure(state, action) {\n      state.productDetails.loading = false;\n      state.productDetails.error = action.payload;\n    },\n    createReviewRequest(state) {\n      state.createReview.loading = true;\n      state.createReview.error = null;\n      state.createReview.success = false;\n    },\n    createReviewSuccess(state) {\n      state.createReview.loading = false;\n      state.createReview.success = true;\n    },\n    createReviewFailure(state, action) {\n      state.createReview.loading = false;\n      state.createReview.error = action.payload;\n    },\n    productTopRequest(state) {\n      state.topRatedProducts.loading = true;\n      state.topRatedProducts.error = null;\n    },\n    productTopSuccess(state, action) {\n      state.topRatedProducts.loading = false;\n      state.topRatedProducts.products = action.payload;\n    },\n    productTopFailure(state, action) {\n      state.topRatedProducts.loading = false;\n      state.topRatedProducts.error = action.payload;\n    }\n  }\n});\nexport const {\n  productListRequest,\n  productListSuccess,\n  productListFailure,\n  productDetailsRequest,\n  productDetailsSuccess,\n  productDetailsFailure,\n  createReviewRequest,\n  createReviewSuccess,\n  createReviewFailure,\n  productTopRequest,\n  productTopSuccess,\n  productTopFailure\n} = productSlice.actions;\nexport const fetchProductList = (keyword, pageNumber = '') => async dispatch => {\n  try {\n    dispatch(productListRequest());\n    const productList = await productAPI.getProductList(keyword, pageNumber);\n    dispatch(productListSuccess(productList));\n  } catch (error) {\n    var _error$response;\n    dispatch(productListFailure(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data.detail) || error.message));\n  }\n};\nexport const fetchProductDetails = id => async dispatch => {\n  try {\n    dispatch(productDetailsRequest());\n    const productDetails = await productAPI.getProductDetails(id);\n    dispatch(productDetailsSuccess(productDetails));\n  } catch (error) {\n    var _error$response2;\n    dispatch(productDetailsFailure(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data.detail) || error.message));\n  }\n};\nexport const createReview = (productId, review) => async dispatch => {\n  try {\n    dispatch(createReviewRequest());\n    await productAPI.createProductReview(productId, review);\n    dispatch(createReviewSuccess());\n  } catch (error) {\n    var _error$response3;\n    dispatch(createReviewFailure(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data.detail) || error.message));\n  }\n};\nexport const fetchTopRatedProducts = () => async dispatch => {\n  try {\n    dispatch(productTopRequest());\n    const topRatedProducts = await productAPI.getTopRatedProducts();\n    dispatch(productTopSuccess(topRatedProducts));\n  } catch (error) {\n    var _error$response4;\n    dispatch(productTopFailure(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data.detail) || error.message));\n  }\n};\nexport const {\n  reducer\n} = productSlice;\nexport default productSlice;","map":{"version":3,"names":["createSlice","productAPI","initialState","productList","products","loading","error","page","pages","productDetails","product","reviews","createReview","success","topRatedProducts","productSlice","name","reducers","productListRequest","state","productListSuccess","action","payload","productListFailure","productDetailsRequest","productDetailsSuccess","productDetailsFailure","createReviewRequest","createReviewSuccess","createReviewFailure","productTopRequest","productTopSuccess","productTopFailure","actions","fetchProductList","keyword","pageNumber","dispatch","getProductList","_error$response","response","data","detail","message","fetchProductDetails","id","getProductDetails","_error$response2","productId","review","createProductReview","_error$response3","fetchTopRatedProducts","getTopRatedProducts","_error$response4","reducer"],"sources":["C:/Users/anasm/OneDrive/Desktop/sarc assignment/full_stack/frontend/src/redux/slices/productSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport productAPI from '../../mocks/product';\r\n\r\nconst initialState = {   \r\n  productList: { products: [], loading: false, error: null, page: 0, pages: 0 },\r\n  productDetails: { product: { reviews: [] }, loading: false, error: null },\r\n  createReview: { loading: false, error: null, success: false },\r\n  topRatedProducts: { products: [], loading: false, error: null },\r\n};\r\n\r\nconst productSlice = createSlice({\r\n  name: \"product\",\r\n  initialState,\r\n  reducers: {\r\n    productListRequest(state) {\r\n      state.productList.loading = true;\r\n      state.productList.error = null;\r\n    },\r\n    productListSuccess(state, action) {\r\n      state.productList.loading = false;\r\n      state.productList.products = action.payload.products;\r\n      state.productList.page = action.payload.page;\r\n      state.productList.pages = action.payload.pages;\r\n    },\r\n    productListFailure(state, action) {\r\n      state.productList.loading = false;\r\n      state.productList.error = action.payload;\r\n    },\r\n    productDetailsRequest(state) {\r\n      state.productDetails.loading = true;\r\n      state.productDetails.error = null;\r\n    },\r\n    productDetailsSuccess(state, action) {\r\n      state.productDetails.loading = false;\r\n      state.productDetails.product = action.payload;\r\n    },\r\n    productDetailsFailure(state, action) {\r\n      state.productDetails.loading = false;\r\n      state.productDetails.error = action.payload;\r\n    },\r\n    createReviewRequest(state) {\r\n      state.createReview.loading = true;\r\n      state.createReview.error = null;\r\n      state.createReview.success = false;\r\n    },\r\n    createReviewSuccess(state) {\r\n      state.createReview.loading = false;\r\n      state.createReview.success = true;\r\n    },\r\n    createReviewFailure(state, action) {\r\n      state.createReview.loading = false;\r\n      state.createReview.error = action.payload;\r\n    },\r\n    productTopRequest(state) {\r\n      state.topRatedProducts.loading = true;\r\n      state.topRatedProducts.error = null;\r\n    },\r\n    productTopSuccess(state, action) {\r\n      state.topRatedProducts.loading = false;\r\n      state.topRatedProducts.products = action.payload;\r\n    },\r\n    productTopFailure(state, action) {\r\n      state.topRatedProducts.loading = false;\r\n      state.topRatedProducts.error = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  productListRequest,\r\n  productListSuccess,\r\n  productListFailure,\r\n  productDetailsRequest,\r\n  productDetailsSuccess,\r\n  productDetailsFailure,\r\n  createReviewRequest,\r\n  createReviewSuccess,\r\n  createReviewFailure,\r\n  productTopRequest,\r\n  productTopSuccess,\r\n  productTopFailure,\r\n} = productSlice.actions;\r\n\r\nexport const fetchProductList = (keyword ,pageNumber='') => async (dispatch) => {\r\n  try {\r\n    dispatch(productListRequest());\r\n    const productList = await productAPI.getProductList(keyword , pageNumber);\r\n    dispatch(productListSuccess(productList));\r\n  } catch (error) {\r\n    dispatch(productListFailure(error.response?.data.detail || error.message));\r\n  }\r\n};\r\n\r\nexport const fetchProductDetails = (id) => async (dispatch) => {\r\n  try {\r\n    dispatch(productDetailsRequest());\r\n    const productDetails = await productAPI.getProductDetails(id);\r\n    dispatch(productDetailsSuccess(productDetails));\r\n  } catch (error) {\r\n    dispatch(productDetailsFailure(error.response?.data.detail || error.message));\r\n  }\r\n};\r\n\r\nexport const createReview = (productId, review) => async (dispatch) => {\r\n  try {\r\n    dispatch(createReviewRequest());\r\n    \r\n    await productAPI.createProductReview(productId, review );\r\n    dispatch(createReviewSuccess());\r\n  } catch (error) {\r\n    dispatch(createReviewFailure(error.response?.data.detail || error.message));\r\n  }\r\n};\r\n\r\nexport const fetchTopRatedProducts = () => async (dispatch) => {\r\n  try {\r\n    dispatch(productTopRequest());\r\n    const topRatedProducts = await productAPI.getTopRatedProducts();\r\n    dispatch(productTopSuccess(topRatedProducts));\r\n  } catch (error) {\r\n    dispatch(productTopFailure(error.response?.data.detail || error.message));\r\n  }\r\n};\r\n\r\nexport const { reducer } = productSlice;\r\nexport default productSlice;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}